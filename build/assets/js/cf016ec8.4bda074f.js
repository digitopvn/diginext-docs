"use strict";(self.webpackChunkdiginext=self.webpackChunkdiginext||[]).push([[5267],{9613:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4840:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=n(7366),r=(n(9496),n(9613));const o={sidebar_position:3},l="Server - Manual installation",i={unversionedId:"installation/server-manual-installation",id:"installation/server-manual-installation",title:"Server - Manual installation",description:"Alright, this is the most complicated way to spin up your build server, as you might need to install a lot of dependencies and spend more efford to secure your server.",source:"@site/docs/installation/server-manual-installation.md",sourceDirName:"installation",slug:"/installation/server-manual-installation",permalink:"/docs/installation/server-manual-installation",draft:!1,editUrl:"https://github.com/digitopvn/diginext-docs/tree/main/docs/installation/server-manual-installation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Server - With Kubernetes",permalink:"/docs/installation/server-with-kubernetes"},next:{title:"Command Line Interface (CLI)",permalink:"/docs/installation/cli-installation"}},s={},u=[{value:"Dependencies",id:"dependencies",level:2},{value:"Database",id:"database",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Start the server",id:"start-the-server",level:2},{value:"Secure your server",id:"secure-your-server",level:2},{value:"RULE #01: Never run your server with <code>root</code> user!",id:"rule-01-never-run-your-server-with-root-user",level:3},{value:"RULE #02: Trust nobody!",id:"rule-02-trust-nobody",level:3},{value:"RULE #03: Limiting access to your cloud resources",id:"rule-03-limiting-access-to-your-cloud-resources",level:3},{value:"Other setup",id:"other-setup",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"What\u2019s next?",id:"whats-next",level:2}],p={toc:u},d="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"server---manual-installation"},"Server - Manual installation"),(0,r.kt)("p",null,"Alright, this is the most complicated way to spin up your build server, as you might need to install a lot of dependencies and spend more efford to secure your server."),(0,r.kt)("p",null,"However, for any reasons, or just for learning purpose, you still want to get the build server up this way\u2026 then ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"suit up, folks! We've got a date with destiny!"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Difficulty: ",(0,r.kt)("strong",{parentName:"p"},"Advanced"))),(0,r.kt)("h2",{id:"dependencies"},"Dependencies"),(0,r.kt)("p",null,"Here is the list of dependencies which you need to install on your server:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Git"),(0,r.kt)("li",{parentName:"ul"},"Node.js (16+)"),(0,r.kt)("li",{parentName:"ul"},"Docker",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Docker BuildX"))),(0,r.kt)("li",{parentName:"ul"},"Podman"),(0,r.kt)("li",{parentName:"ul"},"OpenSSH"),(0,r.kt)("li",{parentName:"ul"},"kubectl",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"google-cloud-sdk-gke-gcloud-auth-plugin"))),(0,r.kt)("li",{parentName:"ul"},"helm"),(0,r.kt)("li",{parentName:"ul"},"gcloud"),(0,r.kt)("li",{parentName:"ul"},"doctl")),(0,r.kt)("h2",{id:"database"},"Database"),(0,r.kt)("p",null,"Diginext Server needs a database to store all of the cloud resources & activities, I used MongoDB, so you have to."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\ud83d\udc49 Install MongoDB: ",(0,r.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/manual/installation/"},"https://www.mongodb.com/docs/manual/installation/"))),(0,r.kt)("p",null,"Well, if you don\u2019t want to install the MongoDB, there are plenty of managed-MongoDB service options available out there for you:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.mongodb.com/atlas/database"},"MongoDB Atlas")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://cloud.google.com/mongodb"},"Google Cloud MongoDB Atlas")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/products/managed-databases-mongodb"},"Digital Ocean MongoDB on-demand")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/vi/solutions/partners/mongodb-atlas/"},"MongoDB Atlas on AWS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://scalegrid.io/mongodb/"},"MongoDB on ScaleGrid")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.ibm.com/cloud/databases-for-mongodb"},"MongoDB on IBM"))),(0,r.kt)("p",null,"Just spin up one and you\u2019re good to go."),(0,r.kt)("p",null,"Save the MongoDB connection string for later setup."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Similar with the CLI, I already tried to simplize the installation steps as much as possible, you only need to install ",(0,r.kt)("inlineCode",{parentName:"p"},"dx")," directly from NPM package manager with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i @topgroup/diginext --location=global\n\n# or with pnpm\npnpm add -g @topgroup/diginext\n\n# or yarn\nyarn global add @topgroup/diginext\n")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The only required configuration for Diginext server is ",(0,r.kt)("inlineCode",{parentName:"p"},"MONGODB_CONNECTION_STRING")," environment variable, copy your MongoDB connection string and set it up with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"export MONGODB_CONNECTION_STRING=<your-mongodb-connection-string>\n")),(0,r.kt)("p",null,"There are more environment variables which you might want to customized, such as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# default to 6969\nDX_PORT=\n# default to a random 64 characters string\nDX_JWT_SECRET=\n# default to 48h\nDX_JWT_EXPIRE=\n# default to empty\nDX_GOOGLE_CLIENT_ID=\n# default to empty\nDX_GOOGLE_CLIENT_SECRET=\n# default to "podman", another option: "docker"\nDX_BUILDER=\n')),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"("),") These environment variables are located at a hidden directory named ",(0,r.kt)("inlineCode",{parentName:"p"},".diginext")," in your home directory.*"),(0,r.kt)("h2",{id:"start-the-server"},"Start the server"),(0,r.kt)("p",null,"Now you can turn your build server on with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dx server up\n")),(0,r.kt)("p",null,"By default, the Diginext server runs on ",(0,r.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:6969")),(0,r.kt)("p",null,"You can set up domain access and SSL certificates on your own so that your team can connect to your server via the CLI or access the admin dashboard. However, this is beyond the scope of this manual."),(0,r.kt)("h2",{id:"secure-your-server"},"Secure your server"),(0,r.kt)("h3",{id:"rule-01-never-run-your-server-with-root-user"},"RULE #01: Never run your server with ",(0,r.kt)("inlineCode",{parentName:"h3"},"root")," user!"),(0,r.kt)("h3",{id:"rule-02-trust-nobody"},"RULE #02: Trust nobody!"),(0,r.kt)("h3",{id:"rule-03-limiting-access-to-your-cloud-resources"},"RULE #03: Limiting access to your cloud resources"),(0,r.kt)("h2",{id:"other-setup"},"Other setup"),(0,r.kt)("p",null,"Check this out: ",(0,r.kt)("a",{parentName:"p",href:"https://www.notion.so/Configuration-d069c95f48404c19ae624cc20cf5314a?pvs=21"},"Configuration")," "),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("p",null,"(TBU)"),(0,r.kt)("h2",{id:"whats-next"},"What\u2019s next?"),(0,r.kt)("p",null,"Learn more about ",(0,r.kt)("a",{parentName:"p",href:"https://www.notion.so/Command-Line-Interface-CLI-12d8c4a19afc4ac498d500edd67b6223?pvs=21"},"Command Line Interface (CLI)")))}c.isMDXComponent=!0}}]);